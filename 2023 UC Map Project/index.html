<!DOCTYPE html>
<html>
   <head>
      <meta name="viewport" contents="with=device-width, initial-scale=1.0">
      <title>UC West Map</title>
      <link rel="stylesheet" type="text/css" href="styles.css">
      <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet">
      <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
      <style>
         body { margin: 0; padding: 0; }
         #map { position: absolute; top: 0; bottom: 0; width: 100%; }
      </style>
   </head>
   <body>
      <header>
         <h1>Bearcat Positioning System</h1>
         <div class="howToButton">
            <p>
               <a href="how_to.html"><button style="font-size:24px"><i class="fa fa-question-circle"></i></button></a>
            </p>
         </div>
         <div class="search">
            <label>
                <input id="search" type="text" placeholder="Search Here" onchange="Search()">
                <ion-icon name="search-outline"></ion-icon>
            </label>
        </div>
      </header>
     
      <div class="container">
         <div class="navigation">
            <h2>Buildings</h2>
            <ul class="lists">
               <button type="button" class="collapsible"><h3>Libraries</h3></button>
               <div class="content">
                  <li onclick="Langsam()">Langsam Library</li>
               </div>
               
               <button type="button" class="collapsible"><h3>Residence Halls</h3></button>
               <div class="content">
                  <li onclick="Dabney()">Dabney Hall</li>
                  <li onclick="Daniels()">Daniels Hall</li>
                  <li onclick="Marian()">Marian Spencer</li>
                  <li onclick="Morgens()">Morgens Hall</li>
                  <li onclick="Scioto()">Scioto Hall</li>
               </div>

               <button type="button" class="collapsible"><h3>Lecture Halls</h3></button>
               <div class="content">
                  <li onclick="Arts()">Arts and Sciences</li>
                  <button type="button" class="collapsible"><li onclick="Baldwin()">Baldwin Hall</li></button>
                  <div class="content">
                     <button onclick = "baldwinSix()" > 600 Level </button>
                     <button onclick = "baldwinSeven()" > 700 Level </button>
                     <button onclick = "baldwinEight()" > 800 Level </button>
                  </div>
                  <li onclick="Braunstein()">Braunstein Hall</li>
                  <li onclick="Crosley()">Crosley Tower</li>
                  <li onclick="DAAP()">DAAP</li>
                  <li onclick="Law()">College of Law</li>
                  <li onclick="Lindner()">Lindner Hall</li>
                  <li onclick="Mantei()">Mantei Center</li>
                  <li onclick="Old()">Old Chem</li>
                  <li onclick="Rieveschl()">Rieveschl Hall</li>
                  <button type="button" class="collapsible"><li onclick="Rhodes()">Rhodes Hall</li></button>
                  <div class="content">
                     <button onclick = "RhodesSix()" > 600 Level </button>
                     <button onclick = "RhodesSeven()" > 700 Level </button>
                  </div>
                  <li onclick="Swift()">Swift Hall</li>
               </div>

               <button type="button" class="collapsible"><h3>Other</h3></button>
               <div class="content">
                   <li onclick="AACRC()">AACRC</li>
                  <li onclick="Rec()">Campus Rec Center</li>
                  <li onclick="Fifth()">Fifth Third Arena</li>
                  <li onclick="French()">French Hall</li>
                  <li onclick="Nippert()">Nippert Stadium</li>
                  <li onclick="NippertWest()">Nippert West Pavilion</li>
                  <li onclick="Steger()">Steger Student Life Center</li>
                  <li onclick="Tangeman()">Tangeman University Center</li>
               </div>              
            </ul>
         </div>
         <div class="main">
            <div class="toggle">
               <ion-icon name="menu-outline"></ion-icon>
            </div>
            <div class="map" id="map">
               <div class="instructions" id="instructions"></div>
            </div>
            
         </div>
      </div>

      <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
      <script nonmodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
      
      <script>
         var coll = document.getElementsByClassName("collapsible");
         var i;

         for (i = 0; i < coll.length; i++) {
         coll[i].addEventListener("click", function() {
            this.classList.toggle("active");
            var content = this.nextElementSibling;
            if (content.style.display === "block") {
               content.style.display = "none";
            } else {
               content.style.display = "block";
            }
         });
         }
      </script>

      <script>
         mapboxgl.accessToken = 'pk.eyJ1Ijoic2hhbmVoaWNrbWFuIiwiYSI6ImNrMXRsOXpwOTBzMm0zYmxtY3JmcjdmMjEifQ.dbva3v7IKJoQ_KB1j7re0w';
         const map = new mapboxgl.Map({
         container: 'map',
         style: 'mapbox://styles/shanehickman/cljvqjtfm01lk01pdgt4shshy',
         center: [-84.515, 39.1329],
         zoom: 15
         });
         
         map.on('click', (event) => {
         const features = map.queryRenderedFeatures(event.point, {
            layers: ['campusbuildings']
         });
         if (!features.length) {
            return;
         }
         const feature = features[0];

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         });

         
         //Menu Toggle
         let toggle = document.querySelector('.toggle');
         let navigation = document.querySelector('.navigation');
         let main = document.querySelector('.main');
         let lists = document.querySelector('.lists');

         toggle.onclick = function(){
            navigation.classList.toggle('active');
            main.classList.toggle('active');
            lists.classList.toggle('active');
         }

         //add hovered class in selected list item
         let list = document.querySelectorAll('.navigation li');
         function activeLink(){
               list.forEach((item) =>
               item.classList.remove('hovered'));
               this.classList.add('hovered');
         }
         list.forEach((item)=>
         item.addEventListener('mouseover',activeLink));

         function MapView(){
               window.location = "index.html"
         }

         function Buildings(){
               window.location = "buildings.html"
         }
         
         function Search() {
            var search = document.getElementById("search").value
            if (search.toLowerCase() == "lindner" || search.toLowerCase() == 'lindner hall'){
               Linder();
            }
            else if (search.toLowerCase() == 'baldwin' || search.toLowerCase() == 'baldwin hall'){
               Baldwin();
            }
            else if (search.toLowerCase() == 'langsam' || search.toLowerCase() == 'langsam library'){
               Langsam();
            }
            else if (search.toLowerCase() == 'dabney' || search.toLowerCase() == 'dabney hall'){
               Dabney();
            }
            else if (search.toLowerCase() == 'daniels' || search.toLowerCase() == 'daniels hall'){
               Daniels();
            }
            else if (search.toLowerCase() == 'marian' || search.toLowerCase() == 'marian spencer'){
               Marian();
            }
            else if (search.toLowerCase() == 'morgens' || search.toLowerCase() == 'morgens hall'){
               Morgens();
            }
            else if (search.toLowerCase() == 'scioto' || search.toLowerCase() == 'scioto hall'){
               Scioto();
            }
            else if (search.toLowerCase() == 'arts and sciences'){
               Arts();
            }
            else if (search.toLowerCase() == 'baldwin' || search.toLowerCase() == 'baldwin hall'){
               Baldwin();
            }
            else if (search.toLowerCase() == 'braunstein' || search.toLowerCase() == 'braustein hall'){
               Braunstein();
            }
            else if (search.toLowerCase() == 'crosley' || search.toLowerCase() == 'crosley tower'){
               Crosley();
            }
            else if (search.toLowerCase() == 'daap'){
               DAAP();
            }
            else if (search.toLowerCase() == 'college of law'){
               Law();
            }
            else if (search.toLowerCase() == 'linder' || search.toLowerCase() == 'linder hall'){
               Lindner();
            }
            else if (search.toLowerCase() == 'mantei' || search.toLowerCase() == 'mantei center'){
               Mantei();
            }
            else if (search.toLowerCase() == 'old chem'){
               Old();
            }
            else if (search.toLowerCase() == 'rieveschl' || search.toLowerCase() == 'rieveschl hall'){
               Rieveschl();
            }
            else if (search.toLowerCase() == 'rhodes' || search.toLowerCase() == 'rhodes hall'){
               Rhodes();
            }
            else if (search.toLowerCase() == 'swift' || search.toLowerCase() == 'swift hall'){
               Swift();
            }
            else if (search.toLowerCase() == 'aacrc'){
               AACRC();
            }
            else if (search.toLowerCase() == 'campus rec center'){
               Rec();
            }
            else if (search.toLowerCase() == 'fifth third arena'){
               Fifth();
            }
            else if (search.toLowerCase() == 'french' || search.toLowerCase() == 'french hall'){
               French();
            }
            else if (search.toLowerCase() == 'nippert stadium'){
               Nippert();
            }
            else if (search.toLowerCase() == 'nippert west pavilion'){
               NippertWest();
            }
            else if (search.toLowerCase() == 'steger' || search.toLowerCase() == 'steger student life center'){
               Steger();
            }
            else if (search.toLowerCase() == 'tangeman' || search.toLowerCase() == 'tangeman university center'){
               Tangeman();
            }
            else if(search.toLowerCase().includes('baldwin ')){

               const splitSearch = search.split(" ");
               
               if (splitSearch[1] == 'Library'){
                  baldwinEight();
                  // also bring up library pop-up
                  const features = map.querySourceFeatures('composite', {
                        'sourceLayer': 'baldwin800labels'
                     });

                     feature = features[0]
                     console.log(feature.properties.text);

                     const popup = new mapboxgl.Popup({ offset: [0, -15] })
                     .setLngLat(feature.geometry.coordinates)
                     .setHTML(
                     `<h3>${feature.properties.text}</p>`
                     )
                     .addTo(map);
   

               }
               else if(splitSearch[1] == '860A'){
                  baldwinEight();
                  //also bring up 860A pop-up
                  const features = map.querySourceFeatures('composite', {
                        'sourceLayer': 'baldwin800labels'
                     });
                     
                     feature = features[1]


                     console.log(feature.properties.text);

                     const popup = new mapboxgl.Popup({ offset: [0, -15] })
                     .setLngLat(feature.geometry.coordinates)
                     .setHTML(
                     `<h3>${feature.properties.text}</p>`
                     )
                     .addTo(map);
               }
               else if(splitSearch[1] == '860B'){
                  baldwinEight();
                  //also bring up 860B pop-up
                  const features = map.querySourceFeatures('composite', {
                        'sourceLayer': 'baldwin800labels'
                     });
                     
                     feature = features[2]


                     console.log(feature.properties.text);

                     const popup = new mapboxgl.Popup({ offset: [0, -15] })
                     .setLngLat(feature.geometry.coordinates)
                     .setHTML(
                     `<h3>${feature.properties.text}</p>`
                     )
                     .addTo(map);
               }
               else if(splitSearch[1] == '860' || splitSearch[1] == 860){
                  baldwinEight();
                  //also bring up 860B pop-up
                  const features = map.querySourceFeatures('composite', {
                        'sourceLayer': 'baldwin800labels'
                     });
                     
                     feature = features[3]


                     console.log(feature.properties.text);

                     const popup = new mapboxgl.Popup({ offset: [0, -15] })
                     .setLngLat(feature.geometry.coordinates)
                     .setHTML(
                     `<h3>${feature.properties.text}</p>`
                     )
                     .addTo(map);
               }
               else{
                  if(parseInt(splitSearch[1]) > 700 && parseInt(splitSearch[1]) < 800){
                     baldwinSeven()
                     // for loop to go through the floor - need to continue to debug.
                     const features = map.querySourceFeatures('composite', {
                        'sourceLayer': 'baldwin700labels'
                     });
                     
                     let acpt = false;
                     let i = 0;
                     let feature = null;
                     while (i < features.length){
                        if (features[i].properties.text == parseInt(splitSearch[1])){
                           feature = features[i];
                           acpt = true;
                           break;

                           
                           
                        }
                        i++;

                     }

                     if (acpt == true){

                        console.log(feature.properties.text);

                        const popup = new mapboxgl.Popup({ offset: [0, -15] })
                        .setLngLat(feature.geometry.coordinates)
                        .setHTML(
                        `<h3>${feature.properties.text}</p>`
                        )
                        .addTo(map);
                     }
                     
                  }
                  else if (parseInt(splitSearch[1]) > 600 && parseInt(splitSearch[1]) < 700){
                     baldwinSix()

                     const features = map.querySourceFeatures('composite', {
                        'sourceLayer': 'baldwin600labels'
                     });


                     let acpt = false;
                     let i = 0;
                     let feature = null;
                     while (i < features.length){
  
                        if (features[i].properties.text == parseInt(splitSearch[1])){
                           feature = features[i];
                           acpt = true;
                           break;
                        }
                        i++;
                     }
                     if (acpt == true){
                        console.log(feature.properties.text);

                        const popup = new mapboxgl.Popup({ offset: [0, -15] })
                        .setLngLat(feature.geometry.coordinates)
                        .setHTML(
                        `<h3>${feature.properties.text}</p>`
                        )
                        .addTo(map);
                     }
                     

                  }
               }

            }
            else if (search.toLowerCase().includes('rhodes ')){
               const splitSearch = search.split(" ");
               
               if (parseInt(splitSearch[1]) >= 600 && parseInt(splitSearch[1]) < 700){
                  RhodesSix();
                  const features = map.querySourceFeatures('composite', {
                        'sourceLayer': 'rhodes600labels'
                  });
                  let acpt = false;
                     let i = 0;
                     let feature = null;
                     while (i < features.length){
  
                        if (features[i].properties.text == parseInt(splitSearch[1])){
                           feature = features[i];
                           acpt = true;
                           break;
                        }
                        i++;
                     }
                     if (acpt == true){
                        console.log(feature.properties.text);

                        const popup = new mapboxgl.Popup({ offset: [0, -15] })
                        .setLngLat(feature.geometry.coordinates)
                        .setHTML(
                        `<h3>${feature.properties.text}</p>`
                        )
                        .addTo(map);
                     }
                     

               }
               else if (parseInt(splitSearch[1]) >= 700 && parseInt(splitSearch[1]) < 800){
                  RhodesSeven();
                  const features = map.querySourceFeatures('composite', {
                        'sourceLayer': 'rhodes700labels'
                  });
                  let acpt = false;
                     let i = 0;
                     let feature = null;
                     while (i < features.length){
  
                        if (features[i].properties.text == parseInt(splitSearch[1])){
                           feature = features[i];
                           acpt = true;
                           break;
                        }
                        i++;
                     }
                     if (acpt == true){
                        console.log(feature.properties.text);

                        const popup = new mapboxgl.Popup({ offset: [0, -15] })
                        .setLngLat(feature.geometry.coordinates)
                        .setHTML(
                        `<h3>${feature.properties.text}</p>`
                        )
                        .addTo(map);
                     }


               }


            }
            


         }
         //
         //
         //building list -----------------------------------------
         function Langsam() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
   
            const feature = features[21];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }

         function Arts() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[0];

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Baldwin() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[14];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Dabney() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[8];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Daniels() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[6];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Marian() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[19];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Morgens() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[25];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Scioto() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[22];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Braunstein() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[1];

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Crosley() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[23];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function DAAP() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[2];

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Law() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[24];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Lindner() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[18];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Mantei() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[17];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Old() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[16];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Rieveschl() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[20];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Rhodes() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[15];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Swift() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[12];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }

         function AACRC() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[3];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Rec() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[10];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Fifth() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[5];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function French() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[13];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Nippert() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[4];

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function NippertWest() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[7];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Steger() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[11];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }
         function Tangeman() {
            const features = map.queryRenderedFeatures(event.point, {
               layers: ['campusbuildings']
            });
            if (!features.length) {
               return;
            }
            const feature = features[9];

            console.log(feature.properties.title);

            const popup = new mapboxgl.Popup({ offset: [0, -15] })
            .setLngLat(feature.geometry.coordinates)
            .setHTML(
            `<h3>${feature.properties.title}</h3><p>${feature.properties.description}</p>`
            )
            .addTo(map);
         }

         map.on('load', () => {
            map.setLayoutProperty('baldwinrooms600', 'visibility', 'none');
            map.setLayoutProperty('baldwin600labels', 'visibility', 'none');
            map.setLayoutProperty('baldwinrooms700', 'visibility', 'none');
            map.setLayoutProperty('baldwin700labels', 'visibility', 'none');
            map.setLayoutProperty('baldwinrooms800', 'visibility', 'none');
            map.setLayoutProperty('baldwin800labels', 'visibility', 'none');
            map.setLayoutProperty('rhodesrooms600', 'visibility', 'none');
            map.setLayoutProperty('rhodes600labels', 'visibility', 'none');
            map.setLayoutProperty('rhodes600rr', 'visibility', 'none');
            map.setLayoutProperty('rhodesrooms700', 'visibility', 'none');
            map.setLayoutProperty('rhodes700labels', 'visibility', 'none');

         })
         
         function baldwinSix(){
            var vis = map.getLayoutProperty('baldwinrooms600', 'visibility');
            if (vis === 'visible'){
               map.setLayoutProperty('baldwinrooms600', 'visibility', 'none');
               map.setLayoutProperty('baldwin600labels', 'visibility', 'none');
            }
            else{
               map.setLayoutProperty('baldwinrooms600', 'visibility', 'visible');
               map.setLayoutProperty('baldwin600labels', 'visibility', 'visible');
               map.setLayoutProperty('baldwinrooms700', 'visibility', 'none');
               map.setLayoutProperty('baldwin700labels', 'visibility', 'none');
               map.setLayoutProperty('baldwinrooms800', 'visibility', 'none');
               map.setLayoutProperty('baldwin800labels', 'visibility', 'none');
            }
             
         }
         function baldwinSeven(){
            var vis = map.getLayoutProperty('baldwinrooms700', 'visibility');
            if (vis === 'visible'){
               map.setLayoutProperty('baldwinrooms700', 'visibility', 'none');
               map.setLayoutProperty('baldwin700labels', 'visibility', 'none');
            }
            else{
               map.setLayoutProperty('baldwinrooms700', 'visibility', 'visible');
               map.setLayoutProperty('baldwin700labels', 'visibility', 'visible');
               map.setLayoutProperty('baldwinrooms600', 'visibility', 'none');
               map.setLayoutProperty('baldwin600labels', 'visibility', 'none');
               map.setLayoutProperty('baldwinrooms800', 'visibility', 'none');
               map.setLayoutProperty('baldwin800labels', 'visibility', 'none');
            }
             
         }
         function baldwinEight(){
            var vis = map.getLayoutProperty('baldwinrooms800', 'visibility');
            if (vis === 'visible'){
               map.setLayoutProperty('baldwinrooms800', 'visibility', 'none');
               map.setLayoutProperty('baldwin800labels', 'visibility', 'none');
            }
            else{
               map.setLayoutProperty('baldwinrooms800', 'visibility', 'visible');
               map.setLayoutProperty('baldwin800labels', 'visibility', 'visible');
               map.setLayoutProperty('baldwinrooms600', 'visibility', 'none');
               map.setLayoutProperty('baldwin600labels', 'visibility', 'none');
               map.setLayoutProperty('baldwinrooms700', 'visibility', 'none');
               map.setLayoutProperty('baldwin700labels', 'visibility', 'none');
            }
             
         }
         function RhodesSix(){
            
            var vis = map.getLayoutProperty('rhodesrooms600', 'visibility');
            if (vis === 'visible'){
               map.setLayoutProperty('rhodesrooms600', 'visibility', 'none');
               map.setLayoutProperty('rhodes600labels', 'visibility', 'none');
               map.setLayoutProperty('rhodes600rr', 'visibility', 'none');
            }
            else{
               map.setLayoutProperty('rhodesrooms700', 'visibility', 'none');
               map.setLayoutProperty('rhodes700labels', 'visibility', 'none');
               map.setLayoutProperty('rhodesrooms600', 'visibility', 'visible');
               map.setLayoutProperty('rhodes600labels', 'visibility', 'visible');
               map.setLayoutProperty('rhodes600rr', 'visibility', 'visible');

            }
             
         }
         function RhodesSeven(){
            
            var vis = map.getLayoutProperty('rhodesrooms700', 'visibility');
            if (vis === 'visible'){
               map.setLayoutProperty('rhodesrooms700', 'visibility', 'none');
               map.setLayoutProperty('rhodes700labels', 'visibility', 'none');
               map.setLayoutProperty('rhodes700rr', 'visibility', 'none');
            }
            else{
               map.setLayoutProperty('rhodesrooms600', 'visibility', 'none');
               map.setLayoutProperty('rhodes600labels', 'visibility', 'none');
               map.setLayoutProperty('rhodesrooms700', 'visibility', 'visible');
               map.setLayoutProperty('rhodes700labels', 'visibility', 'visible');
               map.setLayoutProperty('rhodes600rr', 'visibility', 'visible');

            }
             
         }

         //Adds button to get user location
         map.addControl(
            new mapboxgl.GeolocateControl({
               positionOptions:{
                  enableHighAccuracy: true //Probably want high accuracy, given how precise we want to be, but increases response time
               },
               trackUserLocation: true,
               showUserHeading: true //this option shows on the map the direction the user is heading; Don't know if we need this since we'll have a route?
            })
         );
         map.on('click', (event) => {
            const coords = Object.keys(event.lngLat).map((key) => event.lngLat[key]);
            const end = {
               type: 'FeatureCollection',
               features: [
                  {
                  type: 'Feature',
                  properties: {},
                  geometry: {
                     type: 'Point',
                     coordinates: coords
                  }
                  }
               ]
            };
            if (map.getLayer('end')) {
               map.getSource('end').setData(end);
            } else {
               map.addLayer({
                  id: 'end',
                  type: 'circle',
                  source: {
                  type: 'geojson',
                  data: {
                     type: 'FeatureCollection',
                     features: [
                        {
                        type: 'Feature',
                        properties: {},
                        geometry: {
                           type: 'Point',
                           coordinates: coords
                        }
                        }
                     ]
                  }
                  },
                  paint: {
                  'circle-radius': 10,
                  'circle-color': '#f30'
                  }
               });
            }
            getRoute(coords);
            });
            
         async function getRoute(end){
            console.log(end);
            navigator.geolocation.getCurrentPosition(setCoordinates, coordsNotFound, options = {enableHighAccuracy: true}); //uses setCoordinates as a callback function to set coords
            const query = await fetch(
               `https://api.mapbox.com/directions/v5/mapbox/walking/${coords.longitude},${coords.latitude};${end[0]},${end[1]}?steps=true&geometries=geojson&access_token=${mapboxgl.accessToken}`,
               {method: 'GET'}
            );
            const json = await query.json();
            const data = json.routes[0];
            const route = data.geometry.coordinates;
            const geojson = {
               type: 'Feature',
               properties: {},
               geometry: {
                  type: 'LineString',
                  coordinates: route
               }
            };
            if (map.getSource('route')){
               map.getSource('route').setData(geojson);
            }
            else{
               map.addLayer({
                  id: 'route',
                  type: 'line',
                  source: {
                     type: 'geojson',
                     data: geojson
                  },
                  layout: {
                     'line-join': 'round',
                     'line-cap': 'round'
                  },
                  paint: {
                     'line-color': '#3887be',
                     'line-width': 5,
                     'line-opacity': 0.75
                  }
            });
            }
            const instructions = document.getElementById('instructions');
            const steps = data.legs[0].steps;

            let tripInstructions = '';
            for (const step of steps) {
            tripInstructions += `<li>${step.maneuver.instruction}</li>`;
            }
            instructions.innerHTML = `<p><strong>Trip duration: ${Math.floor(
            data.duration / 60
            )} min </strong></p><ol>${tripInstructions}</ol>`;
         }
         var coords;
         function setCoordinates(pos){ //sets global coords variable to user's current position
            coords = pos.coords;
            //put code in here that will allow to track user on the site
         }
         function coordsNotFound(err){
            console.log(err); //more error handling can be done here; maybe a popup with message?
         }

      </script>
   </body>
</html>